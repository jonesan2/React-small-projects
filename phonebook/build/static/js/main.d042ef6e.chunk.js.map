{"version":3,"sources":["components/Filter.js","components/AddForm.js","components/Person.js","components/People.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","value","onChange","AddForm","handleSubmit","newName","handleTyping","setNewName","newNumber","setNewNumber","onSubmit","type","Person","person","handler","name","number","onClick","People","filteredPersons","map","id","Notification","notifData","message","className","baseUrl","persons","getAll","axios","get","then","response","data","create","newPerson","post","catch","error","update","put","deletePerson","delete","App","useState","setPersons","setFilteredPersons","newFilter","setNewFilter","notification","setNotification","useEffect","personService","allPersons","setter","event","target","newFilteredPersons","filter","includes","preventDefault","idx","findIndex","console","log","newPersons","concat","setTimeout","window","confirm","updatedPerson","thisPerson","deletedPerson","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8LAQeA,EANA,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAOC,EAAV,EAAUA,SAAV,OACb,oDACmB,uBAAOD,MAAOA,EAAOC,SAAUA,QCerCC,EAjBC,SAAC,GAAkF,IAAhFC,EAA+E,EAA/EA,aAAcC,EAAiE,EAAjEA,QAASC,EAAwD,EAAxDA,aAAcC,EAA0C,EAA1CA,WAAYC,EAA8B,EAA9BA,UAAWC,EAAmB,EAAnBA,aAC7E,OACE,uBAAMC,SAAUN,EAAhB,UACE,2CACA,yCACQ,uBAAOH,MAAOI,EAASH,SAAUI,EAAaC,QAEtD,2CACU,uBAAON,MAAOO,EAAWN,SAAUI,EAAaG,QAE1D,8BACE,wBAAQE,KAAK,SAAb,uBCLOC,EANA,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QACxB,OACE,+BAAKD,EAAOE,KAAZ,IAAmBF,EAAOG,OAAO,wBAAQC,QAASH,EAAjB,wBCUtBI,EAXA,SAAC,GAAkC,IAAhCC,EAA+B,EAA/BA,gBAAiBL,EAAc,EAAdA,QACjC,OACE,qCACE,yCACA,6BACGK,EAAgBC,KAAI,SAAAP,GAAM,OAAI,cAAC,EAAD,CAAwBA,OAAQA,EAAQC,QAASA,EAAQD,IAA5CA,EAAOQ,aCM5CC,EAZM,SAAC,GAAmB,IAAjBC,EAAgB,EAAhBA,UACtB,OAA0B,OAAtBA,EAAUC,QACL,KAIP,qBAAKC,UAAWF,EAAUZ,KAA1B,SACGY,EAAUC,W,gBCRXE,EAAU,eA8BDC,EAFC,CAAEC,OA1BH,WACb,OAAOC,IACJC,IAAIJ,GACJK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAuBLC,OApBX,SAACC,GACd,OAAON,IACJO,KAAKV,EAASS,GACdJ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,QAC1BI,OAAM,SAAAC,GAAK,OAAIA,EAAMN,SAASC,SAgBDM,OAbnB,SAAClB,EAAIc,GAClB,OAAON,IACJW,IADI,UACGd,EADH,YACcL,GAAMc,GACxBJ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,QAC1BI,OAAM,gBAS+BI,aANrB,SAACpB,GACpB,OAAOQ,IACJa,OADI,UACMhB,EADN,YACiBL,IACrBU,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UCyFhBU,EA5GH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTjB,EADS,KACAkB,EADA,OAEgCD,mBAASjB,GAFzC,mBAERR,EAFQ,KAES2B,EAFT,OAGgBF,mBAAS,IAHzB,mBAGRvC,EAHQ,KAGCE,EAHD,OAIoBqC,mBAAS,IAJ7B,mBAIRpC,EAJQ,KAIGC,EAJH,OAKoBmC,mBAAS,IAL7B,mBAKRG,EALQ,KAKGC,EALH,OAM0BJ,mBAAS,CACjDpB,QAAS,KACTb,KAAM,OARQ,mBAMRsC,EANQ,KAMMC,EANN,KAWhBC,qBAAU,WACRC,EACGxB,SACAG,MAAK,SAAAsB,GACJR,EAAWQ,GACXP,EAAmBO,QAEtB,CAAEJ,IAEL,IAAM3C,EAAe,SAACgD,GAAD,OAAY,SAACC,GAEhC,GADAD,EAAOC,EAAMC,OAAOvD,OAChBqD,IAAWN,EAAc,CAC3B,IAAMS,EAAqB9B,EAAQ+B,QAAO,SAAA7C,GAAM,OAAIA,EAAOE,KAAK4C,SAASJ,EAAMC,OAAOvD,UACtF6C,EAAmBW,MAwEvB,OACE,gCACE,2CACA,cAAC,EAAD,CAAclC,UAAW0B,IACzB,cAAC,EAAD,CAAQhD,MAAO8C,EAAW7C,SAAUI,EAAa0C,KACjD,cAAC,EAAD,CAAS5C,aAzEQ,SAACmD,GACpBA,EAAMK,iBACN,IAAMC,EAAMlC,EAAQmC,WAAU,SAAAjD,GAAM,OAAIA,EAAOE,OAASV,MAE3C,IAATwD,EACFT,EACGlB,OAAO,CAAEnB,KAAMV,EAASW,OAAQR,IAChCuB,MAAK,SAAAI,GACJ,GAAIA,EAAUG,MACZ,MAAMH,EAER4B,QAAQC,IAAI,cAAe7B,GAC3B,IAAM8B,EAAatC,EAAQuC,OAAO/B,GAClCU,EAAWoB,GACX1D,EAAW,IACXE,EAAa,IACbqC,EAAmBmB,EAAWP,QAAO,SAAA7C,GAAM,OAAIA,EAAOE,KAAK4C,SAASZ,OACpEG,EAAgB,CAAE1B,QAAQ,SAAD,OAAWW,EAAUpB,MAAQJ,KAAM,YAC5DwD,YAAW,WACTjB,EAAgB,CAAE1B,QAAS,KAAMb,KAAM,SACtC,QAEJ0B,OAAM,SAAAC,GACLY,EAAgB,CAAE1B,QAASc,EAAMA,MAAO3B,KAAM,UAC9CwD,YAAW,WACTjB,EAAgB,CAAE1B,QAAS,KAAMb,KAAM,SACtC,QAEEyD,OAAOC,QAAP,UACN1C,EAAQkC,GAAK9C,KADP,4EAGTqC,EACGb,OAAOZ,EAAQkC,GAAKxC,GAAI,CAAEN,KAAMV,EAASW,OAAQR,IACjDuB,MAAK,SAAAuC,GACJ,IAAML,EAAatC,EAChB+B,QAAO,SAAAa,GAAU,OAAI5C,EAAQkC,GAAKxC,KAAOkD,EAAWlD,MACpD6C,OAAOI,GACVzB,EAAWoB,GACX1D,EAAW,IACXE,EAAa,IACbqC,EAAmBmB,EAAWP,QAAO,SAAAa,GAAU,OAAIA,EAAWxD,KAAK4C,SAASZ,UAE7EV,OAAM,WACLa,EAAgB,CACd1B,QAAQ,kBAAD,OAAoBG,EAAQkC,GAAK9C,KAAjC,yCACPJ,KAAM,UAERwD,YAAW,WACTjB,EAAgB,CAAE1B,QAAS,KAAMb,KAAM,SACtC,SAwB8BN,QAASA,EAASC,aAAcA,EAC/DC,WAAYA,EAAYC,UAAWA,EAAWC,aAAcA,IAClE,cAAC,EAAD,CAAQU,gBAAiBA,EAAiBL,QArBzB,SAACD,GAAD,OAAY,WAC3BuD,OAAOC,QAAP,iBAAyBxD,EAAOE,KAAhC,OACFqC,EACGX,aAAa5B,EAAOQ,IACpBU,MAAK,SAAAyC,GACJ,IAAMP,EAAatC,EAAQ+B,QAAO,SAAAa,GAAU,OAAI1D,EAAOQ,KAAOkD,EAAWlD,MACzEwB,EAAWoB,GACX1D,EAAW,IACXE,EAAa,IACbqC,EAAmBmB,EAAWP,QAAO,SAAAa,GAAU,OAAIA,EAAWxD,KAAK4C,SAASZ,kBC7FtF0B,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.d042ef6e.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = ({ value, onChange }) => (\n  <div>\n    filter shown with<input value={value} onChange={onChange} />\n  </div>\n);\n\nexport default Filter;","import React from 'react';\n\nconst AddForm = ({ handleSubmit, newName, handleTyping, setNewName, newNumber, setNewNumber }) => {\n  return (\n    <form onSubmit={handleSubmit}>\n      <h2>add a new</h2>\n      <div>\n        name: <input value={newName} onChange={handleTyping(setNewName)}/>\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={handleTyping(setNewNumber)}/>\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n}\n\nexport default AddForm;","import React from 'react';\n\nconst Person = ({ person, handler }) => {\n  return (\n    <li>{person.name} {person.number}<button onClick={handler}>delete</button></li>\n  );\n}\n\nexport default Person;","import React from 'react';\nimport Person from './Person';\n\nconst People = ({ filteredPersons, handler }) => {\n  return (\n    <>\n      <h2>Numbers</h2>\n      <ul>\n        {filteredPersons.map(person => <Person key={person.id} person={person} handler={handler(person)}/>)}\n      </ul>\n    </>\n  );\n}\n\nexport default People;","import React from 'react';\n\nconst Notification = ({ notifData }) => {\n  if (notifData.message === null) {\n    return null\n  }\n\n  return (\n    <div className={notifData.type}>\n      {notifData.message}\n    </div>\n  )\n}\n\nexport default Notification;","import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  return axios\n    .get(baseUrl)\n    .then(response => response.data);\n};\n\nconst create = (newPerson) => {\n  return axios\n    .post(baseUrl, newPerson)\n    .then(response => response.data)\n    .catch(error => error.response.data)\n};\n\nconst update = (id, newPerson) => {\n  return axios\n    .put(`${baseUrl}/${id}`, newPerson)\n    .then(response => response.data)\n    .catch(() => {});\n}\n\nconst deletePerson = (id) => {\n  return axios\n    .delete(`${baseUrl}/${id}`) \n    .then(response => response.data);\n};\n\nconst persons = { getAll, create, update, deletePerson };\n\nexport default persons;","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport AddForm from './components/AddForm';\nimport People from './components/People';\nimport Notification from './components/Notification';\nimport personService from './services/persons';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [ filteredPersons, setFilteredPersons ] = useState(persons);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ newFilter, setNewFilter ] = useState('');\n  const [ notification, setNotification ] = useState({\n    message: null,\n    type: null\n  });\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(allPersons => {\n        setPersons(allPersons);\n        setFilteredPersons(allPersons);\n      });\n  }, [ notification ]);\n\n  const handleTyping = (setter) => (event) => {\n    setter(event.target.value);\n    if (setter === setNewFilter) {\n      const newFilteredPersons = persons.filter(person => person.name.includes(event.target.value));\n      setFilteredPersons(newFilteredPersons);\n    }\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const idx = persons.findIndex(person => person.name === newName);\n\n    if (idx === -1) {\n      personService\n        .create({ name: newName, number: newNumber })\n        .then(newPerson => {\n          if (newPerson.error) {\n            throw(newPerson)\n          }\n          console.log('newPerson: ', newPerson);\n          const newPersons = persons.concat(newPerson);\n          setPersons(newPersons);\n          setNewName('');\n          setNewNumber('');\n          setFilteredPersons(newPersons.filter(person => person.name.includes(newFilter)));\n          setNotification({ message: `Added ${newPerson.name}`, type: 'success' });\n          setTimeout(() => {\n            setNotification({ message: null, type: null });\n          }, 5000);\n        })\n        .catch(error => {\n          setNotification({ message: error.error, type: 'error' });\n          setTimeout(() => {\n            setNotification({ message: null, type: null });\n          }, 5000);\n        })\n    } else if (window.confirm(\n      `${persons[idx].name} is already added to phonebook, replace the old number with a new one?`\n      )) {\n      personService\n        .update(persons[idx].id, { name: newName, number: newNumber })\n        .then(updatedPerson => {\n          const newPersons = persons\n            .filter(thisPerson => persons[idx].id !== thisPerson.id)\n            .concat(updatedPerson);\n          setPersons(newPersons);\n          setNewName('');\n          setNewNumber('');\n          setFilteredPersons(newPersons.filter(thisPerson => thisPerson.name.includes(newFilter)));\n        })\n        .catch(() => {\n          setNotification({\n            message: `Information on ${persons[idx].name} has already been removed from server`,\n            type: 'error'\n          });\n          setTimeout(() => {\n            setNotification({ message: null, type: null });\n          }, 5000);\n        })\n    }\n  };\n\n  const handleDelete = (person) => () => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personService\n        .deletePerson(person.id)\n        .then(deletedPerson => {\n          const newPersons = persons.filter(thisPerson => person.id !== thisPerson.id);\n          setPersons(newPersons);\n          setNewName('');\n          setNewNumber('');\n          setFilteredPersons(newPersons.filter(thisPerson => thisPerson.name.includes(newFilter)));\n        });\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notifData={notification} />\n      <Filter value={newFilter} onChange={handleTyping(setNewFilter)} />\n      <AddForm handleSubmit={handleSubmit} newName={newName} handleTyping={handleTyping}\n            setNewName={setNewName} newNumber={newNumber} setNewNumber={setNewNumber} />\n      <People filteredPersons={filteredPersons} handler={handleDelete} />\n    </div>\n  );\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}